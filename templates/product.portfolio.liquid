<!-- /templates/product.liquid -->
{% comment %}

  Rich snippets (itemscope, itemtype, etc.) for products are a theme requirement,
  and allow search engines to easily understand what the content is.

  For more information on these Scheme.org tags, visit:
    - http://schema.org/docs/gs.html

{% endcomment %}

<div class="full-width-wrapper">
  <div itemscope itemtype="http://schema.org/Product">

    <meta itemprop="url" content="{{ shop.url }}{{ product.url }}">
    <meta itemprop="image" content="{{ product.featured_image.src | img_url: 'grande' }}">

    {% comment %}
      Get first variant, or deep linked one
    {% endcomment %}
    {% assign current_variant = product.selected_or_first_available_variant %}

    {% include 'breadcrumb' %}

    <div class="grid product-single">
      <div class="grid__item large--one-half text-center">

        {% if product.images.size > 1 %}
          <div class="carousel product-single__photos" id="ProductPhoto">
            {% for image in product.images %}
              <div class="carousel-slide">
                <img src="{{ image.src | img_url: '1024x1024' }}" alt="{{ image.alt | escape }}" >
              </div>
            {% endfor %}
          </div>
        {% else %}
          <div class="product-single__photos" id="ProductPhoto">
            {% assign featured_image = current_variant.featured_image | default: product.featured_image %}
            <img src="{{ featured_image | img_url: '1024x1024' }}" alt="{{ featured_image.alt | escape }}" id="ProductPhotoImg">
          </div>
        {% endif %}

      </div>

      <div class="grid__item large--one-half third-wrapper">

        <h2 class="product-type">{{ product.type }}</h2>
        <h1 class="product-title" itemprop="name">{{ product.title }}</h1>

        <div class="product-description rte" itemprop="description">
          {{ product.description }}
        </div>

      </div>
    </div>

  </div>
</div>

{% comment %}
  To take advantage of a callback on the select dropdown, add option_selection.js
  and customize the JS in timber.productPage as needed.

  Currently, timber.productPage does the following:
    - Hides your <select> tag from above
    - Breaks out the product variants into separate product options, if more than one exists
    - Generates a <select> tag for each product option
    - Enables/disables elements based on variant availability

  Callback notes:
    - Keep the callback available to the global scope (window.selectCallback) so that advanced
      addons can override it.
      * E.g. multiple currencies http://docs.shopify.com/manual/configuration/store-customization/currencies-and-translations/currencies/how-to-toggle-between-two-currencies
{% endcomment %}

<!-- Product Detail Images ================================================== -->

<script>
  var productImg = ".product-single__photos";
  $(function() {
    $(productImg).imagesLoaded(function(){
      $(productImg).fadeTo(350, 1);
    });
  })
</script>

{% if product.images.size > 1 %}
  {{ 'slick.min.js' | asset_url | script_tag }}
  <script>
    $(function() {
      $('.product-single__photos').slick({
        dots: true,
        infinite: true
      });
    })
  </script>

{% else %}

  {{ 'jquery.zoom.min.js' | asset_url | script_tag }}
  <script>
    $(function() {
      {% assign zoomed_image = current_variant.featured_image | default: product.featured_image %}
      $('.product-single__photos').zoom({
        url: '{{ zoomed_image | img_url: 'master' }}',
        on: 'click'
      });
    })
  </script>
{% endif %}